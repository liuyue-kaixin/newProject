{"version":3,"sources":["file:///Volumes/%E5%9B%BA%E6%80%81/ccProject/extensions/oops-plugin-framework/assets/module/common/GameCollision.ts"],"names":["ccenum","Collider","Component","_decorator","ccclass","property","CollisionType","GameCollision","type","tooltip","Event_TriggerEnter","Event_TriggerStay","Event_TriggerExit","Event_CollisionEnter","Event_CollisionStay","Event_CollisionExit","collider","onLoad","getComponent","isTrigger","on","onTrigger","onCollision","event","onTriggerEnter","onTriggerStay","onTriggerExit","onCollisionEnter","onCollisionStay","onCollisionExit","Ballistic"],"mappings":"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","sourcesContent":["/*\r\n * @Author: dgflash\r\n * @Date: 2022-03-29 17:08:08\r\n * @LastEditors: dgflash\r\n * @LastEditTime: 2022-09-02 09:45:41\r\n */\r\nimport { ccenum, Collider, Component, ICollisionEvent, ITriggerEvent, _decorator } from \"cc\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n/** 碰撞物体类型 */\r\nexport enum CollisionType {\r\n    /** 角色类 */\r\n    Role,\r\n    /** 飞弹类体*/\r\n    Ballistic,\r\n    /** 墙体类 */\r\n    Wall\r\n}\r\nccenum(CollisionType);\r\n\r\n/** 碰撞器与触发器 */\r\n@ccclass('GameCollision')\r\nexport class GameCollision extends Component {\r\n    private Event_TriggerEnter: any = \"onTriggerEnter\";\r\n    private Event_TriggerStay: any = \"onTriggerStay\";\r\n    private Event_TriggerExit: any = \"onTriggerExit\";\r\n    private Event_CollisionEnter: any = \"onCollisionEnter\";\r\n    private Event_CollisionStay: any = \"onCollisionStay\";\r\n    private Event_CollisionExit: any = \"onCollisionExit\";\r\n\r\n    protected collider: Collider = null!;\r\n\r\n    @property({ type: CollisionType, tooltip: '碰撞物体类型' })\r\n    type: CollisionType = CollisionType.Ballistic;\r\n\r\n    onLoad() {\r\n        this.collider = this.getComponent(Collider)!;\r\n        if (this.collider.isTrigger) {\r\n            this.collider.on(this.Event_TriggerEnter, this.onTrigger, this);\r\n            this.collider.on(this.Event_TriggerStay, this.onTrigger, this);\r\n            this.collider.on(this.Event_TriggerExit, this.onTrigger, this);\r\n        }\r\n        else {\r\n            this.collider.on(this.Event_CollisionEnter, this.onCollision, this);\r\n            this.collider.on(this.Event_CollisionStay, this.onCollision, this);\r\n            this.collider.on(this.Event_CollisionExit, this.onCollision, this);\r\n        }\r\n    }\r\n\r\n    private onTrigger(event: ITriggerEvent) {\r\n        switch (event.type) {\r\n            case this.Event_TriggerEnter:\r\n                this.onTriggerEnter(event);\r\n                break;\r\n            case this.Event_TriggerStay:\r\n                this.onTriggerStay(event);\r\n                break;\r\n            case this.Event_TriggerExit:\r\n                this.onTriggerExit(event);\r\n                break;\r\n        }\r\n    }\r\n\r\n    protected onTriggerEnter(event: ITriggerEvent) { }\r\n    protected onTriggerStay(event: ITriggerEvent) { }\r\n    protected onTriggerExit(event: ITriggerEvent) { }\r\n\r\n    private onCollision(event: ICollisionEvent) {\r\n        switch (event.type) {\r\n            case this.Event_CollisionEnter:\r\n                this.onCollisionEnter(event);\r\n                break;\r\n            case this.Event_CollisionStay:\r\n                this.onCollisionStay(event);\r\n                break;\r\n            case this.Event_CollisionExit:\r\n                this.onCollisionExit(event);\r\n                break;\r\n        }\r\n    }\r\n\r\n    protected onCollisionEnter(event: ICollisionEvent) { }\r\n    protected onCollisionStay(event: ICollisionEvent) { }\r\n    protected onCollisionExit(event: ICollisionEvent) { }\r\n}\r\n"]}