{"version":3,"sources":["file:///Volumes/%E5%9B%BA%E6%80%81/ccProject/extensions/oops-plugin-framework/assets/core/gui/prompt/CommonPrompt.ts"],"names":["Component","_decorator","LanguageLabel","oops","ccclass","property","CommonPrompt","config","onTouchEnd","event","data","target","name","onOk","onCancel","onAdded","params","setTitle","setContent","setBtnOkLabel","setBtnCancelLabel","node","active","lab_title","dataID","title","lab_content","content","lab_ok","okWord","lab_cancel","cancelWord","parent","needCancel","okFunc","close","onClose","closeFunc","cancelFunc","gui","removeByNode","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,U,OAAAA,U;;AACvBC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,I,iBAAAA,I;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;AAE9B;;8BAEaK,Y,WADZF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ;AAAA;AAAA,yC,UAIRA,QAAQ;AAAA;AAAA,yC,UAIRA,QAAQ;AAAA;AAAA,yC,UAIRA,QAAQ;AAAA;AAAA,yC,2BAfb,MACaC,YADb,SACkCN,SADlC,CAC4C;AAAA;AAAA;;AACxC;AADwC;;AAKxC;AALwC;;AASxC;AATwC;;AAaxC;AAbwC;;AAAA,eAiBhCO,MAjBgC,GAiBlB,EAjBkB;AAAA;;AAmBhCC,QAAAA,UAAU,CAACC,KAAD,EAAoBC,IAApB,EAA+B;AAC7C,kBAAQD,KAAK,CAACE,MAAN,CAAaC,IAArB;AACI,iBAAK,QAAL;AACI,mBAAKC,IAAL;AACA;;AACJ,iBAAK,YAAL;AACI,mBAAKC,QAAL;AACA;;AACJ;AACI;AARR;AAUH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIC,QAAAA,OAAO,CAACC,MAAW,GAAG,EAAf,EAAmB;AACtB,eAAKT,MAAL,GAAcS,MAAM,IAAI,EAAxB;AACA,eAAKC,QAAL;AACA,eAAKC,UAAL;AACA,eAAKC,aAAL;AACA,eAAKC,iBAAL;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH;;AAEOL,QAAAA,QAAQ,GAAG;AACf,eAAKM,SAAL,CAAgBC,MAAhB,GAAyB,KAAKjB,MAAL,CAAYkB,KAArC;AACH;;AAEOP,QAAAA,UAAU,GAAG;AACjB,eAAKQ,WAAL,CAAkBF,MAAlB,GAA2B,KAAKjB,MAAL,CAAYoB,OAAvC;AACH;;AAEOR,QAAAA,aAAa,GAAG;AACpB,eAAKS,MAAL,CAAaJ,MAAb,GAAsB,KAAKjB,MAAL,CAAYsB,MAAlC;AACH;;AAEOT,QAAAA,iBAAiB,GAAG;AACxB,eAAKU,UAAL,CAAiBN,MAAjB,GAA0B,KAAKjB,MAAL,CAAYwB,UAAtC;AACA,eAAKD,UAAL,CAAiBT,IAAjB,CAAuBW,MAAvB,CAA+BV,MAA/B,GAAwC,KAAKf,MAAL,CAAY0B,UAAZ,IAA0B,KAAlE;AACH;;AAEOpB,QAAAA,IAAI,GAAG;AACX,cAAI,OAAO,KAAKN,MAAL,CAAY2B,MAAnB,IAA6B,UAAjC,EAA6C;AACzC,iBAAK3B,MAAL,CAAY2B,MAAZ;AACH;;AACD,eAAKC,KAAL;AACH;;AAEOC,QAAAA,OAAO,GAAG;AACd,cAAI,OAAO,KAAK7B,MAAL,CAAY8B,SAAnB,IAAgC,UAApC,EAAgD;AAC5C,iBAAK9B,MAAL,CAAY8B,SAAZ;AACH;;AACD,eAAKF,KAAL;AACH;;AAEOrB,QAAAA,QAAQ,GAAG;AACf,cAAI,OAAO,KAAKP,MAAL,CAAY+B,UAAnB,IAAiC,UAArC,EAAiD;AAC7C,iBAAK/B,MAAL,CAAY+B,UAAZ;AACH;;AACD,eAAKH,KAAL;AACH;;AAEOA,QAAAA,KAAK,GAAG;AACZ;AAAA;AAAA,4BAAKI,GAAL,CAASC,YAAT,CAAsB,KAAKnB,IAA3B;AACH;;AAEDoB,QAAAA,SAAS,GAAG;AACR,eAAKlC,MAAL,GAAc,IAAd;AACH;;AAnGuC,O;;;;;iBAGE,I;;;;;;;iBAIE,I;;;;;;;iBAIL,I;;;;;;;iBAII,I","sourcesContent":["import { Component, EventTouch, _decorator } from \"cc\";\r\nimport { LanguageLabel } from \"../../../libs/gui/language/LanguageLabel\";\r\nimport { oops } from \"../../Oops\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n/** 公共提示窗口 */\r\n@ccclass(\"CommonPrompt\")\r\nexport class CommonPrompt extends Component {\r\n    /** 窗口标题多语言组件 */\r\n    @property(LanguageLabel)\r\n    private lab_title: LanguageLabel | null = null;\r\n\r\n    /** 提示内容多语言组件 */\r\n    @property(LanguageLabel)\r\n    private lab_content: LanguageLabel | null = null;\r\n\r\n    /** 确认按钮文本多语言组件 */\r\n    @property(LanguageLabel)\r\n    private lab_ok: LanguageLabel | null = null\r\n\r\n    /** 取消按钮文本多语言组件 */\r\n    @property(LanguageLabel)\r\n    private lab_cancel: LanguageLabel | null = null;\r\n\r\n    private config: any = {};\r\n\r\n    private onTouchEnd(event: EventTouch, data: any) {\r\n        switch (event.target.name) {\r\n            case \"btn_ok\":\r\n                this.onOk();\r\n                break;\r\n            case \"btn_cancel\":\r\n                this.onCancel();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * @param params 参数 \r\n     * {\r\n     *     title:      标题\r\n     *     content:    内容\r\n     *     okWord:     ok按钮上的文字\r\n     *     okFunc:     确认时执行的方法\r\n     *     cancelWord: 取消按钮的文字\r\n     *     cancelFunc: 取消时执行的方法\r\n     *     needCancel: 是否需要取消按钮\r\n     * }\r\n     */\r\n    onAdded(params: any = {}) {\r\n        this.config = params || {};\r\n        this.setTitle();\r\n        this.setContent();\r\n        this.setBtnOkLabel();\r\n        this.setBtnCancelLabel();\r\n        this.node.active = true;\r\n    }\r\n\r\n    private setTitle() {\r\n        this.lab_title!.dataID = this.config.title;\r\n    }\r\n\r\n    private setContent() {\r\n        this.lab_content!.dataID = this.config.content;\r\n    }\r\n\r\n    private setBtnOkLabel() {\r\n        this.lab_ok!.dataID = this.config.okWord;\r\n    }\r\n\r\n    private setBtnCancelLabel() {\r\n        this.lab_cancel!.dataID = this.config.cancelWord;\r\n        this.lab_cancel!.node!.parent!.active = this.config.needCancel || false;\r\n    }\r\n\r\n    private onOk() {\r\n        if (typeof this.config.okFunc == \"function\") {\r\n            this.config.okFunc();\r\n        }\r\n        this.close();\r\n    }\r\n\r\n    private onClose() {\r\n        if (typeof this.config.closeFunc == \"function\") {\r\n            this.config.closeFunc();\r\n        }\r\n        this.close();\r\n    }\r\n\r\n    private onCancel() {\r\n        if (typeof this.config.cancelFunc == \"function\") {\r\n            this.config.cancelFunc();\r\n        }\r\n        this.close();\r\n    }\r\n\r\n    private close() {\r\n        oops.gui.removeByNode(this.node);\r\n    }\r\n\r\n    onDestroy() {\r\n        this.config = null;\r\n    }\r\n}"]}