{"version":3,"sources":["file:///Volumes/SSD%201/ccProject/extensions/oops-plugin-framework/assets/libs/gui/button/ButtonEffect.ts"],"names":["Animation","AnimationClip","Sprite","_decorator","oops","ButtonSimple","ccclass","property","menu","ButtonEffect","tooltip","anim","grayscale","node","getComponent","value","onLoad","addComponent","ac_start","res","get","ac_end","defaultClip","createState","name","onTouchtStart","event","disabledEffect","play","onTouchEnd"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAMSA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,a,OAAAA,a;AAA2BC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,U,OAAAA,U;;AAC9CC,MAAAA,I,iBAAAA,I;;AACFC,MAAAA,Y;;;;;;AARP;AACA;AACA;AACA;AACA;AACA;;;;;OAKM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA8BL,U;;yBAIfM,Y,WAFpBH,OAAO,CAAC,cAAD,C,UACPE,IAAI,CAAC,wBAAD,C,UAEAD,QAAQ,CAAC;AACNG,QAAAA,OAAO,EAAE;AADH,OAAD,C,0CAHb,MAEqBD,YAFrB;AAAA;AAAA,wCAEuD;AAAA;AAAA;;AAAA;;AAAA,eAM3CE,IAN2C;AAAA;;AAQnD;AACa,YAATC,SAAS,GAAY;AACrB,iBAAO,KAAKC,IAAL,CAAUC,YAAV,CAAuBZ,MAAvB,EAAgCU,SAAvC;AACH;;AACY,YAATA,SAAS,CAACG,KAAD,EAAiB;AAC1B,cAAI,KAAKF,IAAL,CAAUC,YAAV,CAAuBZ,MAAvB,CAAJ,EAAoC;AAChC,iBAAKW,IAAL,CAAUC,YAAV,CAAuBZ,MAAvB,EAAgCU,SAAhC,GAA4CG,KAA5C;AACH;AACJ;;AAEDC,QAAAA,MAAM,GAAG;AACL,eAAKL,IAAL,GAAY,KAAKE,IAAL,CAAUI,YAAV,CAAuBjB,SAAvB,CAAZ;AAEA,cAAIkB,QAAuB,GAAG;AAAA;AAAA,4BAAKC,GAAL,CAASC,GAAT,CAAa,gCAAb,EAA+CnB,aAA/C,CAA9B;AACA,cAAIoB,MAAqB,GAAG;AAAA;AAAA,4BAAKF,GAAL,CAASC,GAAT,CAAa,8BAAb,EAA6CnB,aAA7C,CAA5B;AACA,eAAKU,IAAL,CAAUW,WAAV,GAAwBJ,QAAxB;AACA,eAAKP,IAAL,CAAUY,WAAV,CAAsBL,QAAtB,EAAgCA,QAAhC,oBAAgCA,QAAQ,CAAEM,IAA1C;AACA,eAAKb,IAAL,CAAUY,WAAV,CAAsBF,MAAtB,EAA8BA,MAA9B,oBAA8BA,MAAM,CAAEG,IAAtC;AAEA,gBAAMR,MAAN;AACH;;AAESS,QAAAA,aAAa,CAACC,KAAD,EAAoB;AACvC,cAAI,CAAC,KAAKC,cAAV,EAA0B;AACtB,iBAAKhB,IAAL,CAAUiB,IAAV,CAAe,oBAAf;AACH;AACJ;;AAESC,QAAAA,UAAU,CAACH,KAAD,EAAoB;AACpC,cAAI,CAAC,KAAKC,cAAV,EAA0B;AACtB,iBAAKhB,IAAL,CAAUiB,IAAV,CAAe,kBAAf;AACH;;AAED,gBAAMC,UAAN,CAAiBH,KAAjB;AACH;;AA1CkD,O;;;;;iBAIzB,K","sourcesContent":["/*\r\n * @Author: dgflash\r\n * @Date: 2023-01-30 14:00:41\r\n * @LastEditors: dgflash\r\n * @LastEditTime: 2023-02-09 10:54:28\r\n */\r\nimport { Animation, AnimationClip, EventTouch, Sprite, _decorator } from \"cc\";\r\nimport { oops } from \"../../../core/Oops\";\r\nimport ButtonSimple from \"./ButtonSimple\";\r\n\r\nconst { ccclass, property, menu } = _decorator;\r\n\r\n@ccclass(\"ButtonEffect\")\r\n@menu('ui/button/ButtonEffect')\r\nexport default class ButtonEffect extends ButtonSimple {\r\n    @property({\r\n        tooltip: \"是否开启\"\r\n    })\r\n    disabledEffect: boolean = false;\r\n\r\n    private anim!: Animation;\r\n\r\n    /** 按钮禁用效果 */\r\n    get grayscale(): boolean {\r\n        return this.node.getComponent(Sprite)!.grayscale;\r\n    }\r\n    set grayscale(value: boolean) {\r\n        if (this.node.getComponent(Sprite)) {\r\n            this.node.getComponent(Sprite)!.grayscale = value;\r\n        }\r\n    }\r\n\r\n    onLoad() {\r\n        this.anim = this.node.addComponent(Animation);\r\n\r\n        var ac_start: AnimationClip = oops.res.get(\"common/anim/button_scale_start\", AnimationClip)!;\r\n        var ac_end: AnimationClip = oops.res.get(\"common/anim/button_scale_end\", AnimationClip)!;\r\n        this.anim.defaultClip = ac_start;\r\n        this.anim.createState(ac_start, ac_start?.name);\r\n        this.anim.createState(ac_end, ac_end?.name);\r\n\r\n        super.onLoad();\r\n    }\r\n\r\n    protected onTouchtStart(event: EventTouch) {\r\n        if (!this.disabledEffect) {\r\n            this.anim.play(\"button_scale_start\");\r\n        }\r\n    }\r\n\r\n    protected onTouchEnd(event: EventTouch) {\r\n        if (!this.disabledEffect) {\r\n            this.anim.play(\"button_scale_end\");\r\n        }\r\n\r\n        super.onTouchEnd(event);\r\n    }\r\n}"]}