{"version":3,"sources":["file:///Volumes/%E5%9B%BA%E6%80%81/project/extensions/oops-plugin-framework/assets/libs/animator/core/AnimatorCondition.ts"],"names":["AnimatorCondition","error","ParamType","LogicType","constructor","data","ac","_ac","_param","_value","_logic","EQUAL","param","value","logic","getParamName","getParamType","params","check","type","BOOLEAN","getBool","NUMBER","getNumber","NOTEQUAL","GREATER","LESS","GREATER_EQUAL","LESS_EQUAL","AUTO_TRIGGER","getAutoTrigger","TRIGGER","getTrigger"],"mappings":"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","sourcesContent":["import { error } from \"cc\";\r\nimport AnimatorController from \"./AnimatorController\";\r\n\r\n/** 参数类型 */\r\nexport enum ParamType {\r\n    COMPLETE = 0,\r\n    BOOLEAN = 1,\r\n    NUMBER = 2,\r\n    TRIGGER = 3,\r\n    AUTO_TRIGGER = 4\r\n}\r\n\r\n/** 逻辑类型 */\r\nexport enum LogicType {\r\n    EQUAL = 0,\r\n    NOTEQUAL = 1,\r\n    GREATER = 2,\r\n    LESS = 3,\r\n    GREATER_EQUAL = 4,\r\n    LESS_EQUAL = 5\r\n}\r\n\r\n/**\r\n * 单项条件\r\n */\r\nexport default class AnimatorCondition {\r\n    private _ac: AnimatorController;\r\n    /** 此条件对应的参数名 */\r\n    private _param: string = \"\";\r\n    /** 此条件对应的值 */\r\n    private _value: number = 0;\r\n    /** 此条件与值比较的逻辑 */\r\n    private _logic: LogicType = LogicType.EQUAL;\r\n\r\n    constructor(data: any, ac: AnimatorController) {\r\n        this._ac = ac;\r\n        this._param = data.param;\r\n        this._value = data.value;\r\n        this._logic = data.logic;\r\n    }\r\n\r\n    public getParamName() {\r\n        return this._param;\r\n    }\r\n\r\n    public getParamType(): ParamType {\r\n        return this._ac.params.getParamType(this._param);\r\n    }\r\n\r\n    /** 判断此条件是否满足 */\r\n    public check(): boolean {\r\n        let type: ParamType = this.getParamType();\r\n        if (type === ParamType.BOOLEAN) {\r\n            return this._ac.params.getBool(this._param) === this._value;\r\n        } else if (type === ParamType.NUMBER) {\r\n            let value: number = this._ac.params.getNumber(this._param);\r\n            switch (this._logic) {\r\n                case LogicType.EQUAL:\r\n                    return value === this._value;\r\n                case LogicType.NOTEQUAL:\r\n                    return value !== this._value;\r\n                case LogicType.GREATER:\r\n                    return value > this._value;\r\n                case LogicType.LESS:\r\n                    return value < this._value;\r\n                case LogicType.GREATER_EQUAL:\r\n                    return value >= this._value;\r\n                case LogicType.LESS_EQUAL:\r\n                    return value <= this._value;\r\n                default:\r\n                    return false;\r\n            }\r\n        } else if (type === ParamType.AUTO_TRIGGER) {\r\n            return this._ac.params.getAutoTrigger(this._param) !== 0;\r\n        } else if (type === ParamType.TRIGGER) {\r\n            return this._ac.params.getTrigger(this._param) !== 0;\r\n        } else {\r\n            error(`[AnimatorCondition.check] 错误的type: ${type}`);\r\n            return false;\r\n        }\r\n    }\r\n}\r\n"]}