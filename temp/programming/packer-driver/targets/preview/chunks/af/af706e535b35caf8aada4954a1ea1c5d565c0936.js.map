{"version":3,"sources":["file:///Volumes/SSD%201/ccProject/assets/script/battle/demos/bulletHell/snailTail.ts"],"names":["_decorator","instantiate","Quat","Vec3","Trigger","Enemy","ccclass","property","tempPos","tempRot","SnailTail","get","prefab","snailtail","pools","pop","node","getComponent","put","push","remove","onTrigger","b","trigger","exit","group","BULLET","PLAYER"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAqBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;AAEvCC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAExBQ,MAAAA,O,GAAU,IAAIL,IAAJ,E;AACVM,MAAAA,O,GAAU,IAAIP,IAAJ,E;;2BAEHQ,S,WADZJ,OAAO,CAAC,WAAD,C,2BAAR,MACaI,SADb;AAAA;AAAA,0BACqC;AAIvB,eAAHC,GAAG,CAACC,MAAD,EAAiB;AACvB,cAAIC,SAAS,GAAG,KAAKC,KAAL,CAAWC,GAAX,MAAoB,IAApC;;AACA,cAAI,CAACF,SAAL,EAAgB;AACZ,gBAAIG,IAAI,GAAGf,WAAW,CAACW,MAAD,CAAtB;AACAC,YAAAA,SAAS,GAAGG,IAAI,CAACC,YAAL,CAAkBP,SAAlB,CAAZ;AACH;;AAED,iBAAOG,SAAP;AACH;;AAES,eAAHK,GAAG,CAACL,SAAD,EAAuB;AAC7B;AACA,eAAKC,KAAL,CAAWK,IAAX,CAAgBN,SAAhB,EAF6B,CAG7B;;AACAA,UAAAA,SAAS,CAACO,MAAV,CAAiB,KAAjB;AACH;;AAGDC,QAAAA,SAAS,CAACC,CAAD,EAAUC,OAAV,EAA4B;AACjC,cAAGA,OAAO,IAAI;AAAA;AAAA,kCAAQC,IAAtB,EAA6B;;AAE7B,kBAAQF,CAAC,CAACG,KAAV;AACI,iBAAK,KAAKC,MAAV;AAAkB;AACd;;AACJ,iBAAK,KAAKC,MAAV;AAAkB;AACd;AAJR,WAHiC,CAUjC;;;AACAjB,UAAAA,SAAS,CAACQ,GAAV,CAAc,IAAd,EAXiC,CAajC;AACA;AACH;;AArCgC,O,UAG1BJ,K,GAA0B,E","sourcesContent":["import { _decorator, instantiate, Prefab, Quat, Vec3 } from 'cc';\nimport { cBody } from '../../collision/Body';\nimport { Trigger } from '../../collision/Object';\nimport { Enemy } from './enemy';\nconst { ccclass, property } = _decorator;\n\nconst tempPos = new Vec3();\nconst tempRot = new Quat();\n@ccclass('SnailTail')\nexport class SnailTail extends Enemy {\n\n    //缓存池管理\n    static pools: Array<SnailTail> = [];\n    static get(prefab: Prefab) {\n        let snailtail = this.pools.pop() || null;\n        if (!snailtail) {\n            let node = instantiate(prefab);\n            snailtail = node.getComponent(SnailTail);\n        }\n\n        return snailtail;\n    }\n\n    static put(snailtail: SnailTail) {\n        //压入缓存池管理节点\n        this.pools.push(snailtail);\n        //移除node不回收body\n        snailtail.remove(false);\n    }\n\n\n    onTrigger(b: cBody,trigger: Trigger) {\n        if(trigger == Trigger.exit ) return;\n\n        switch (b.group) {\n            case this.BULLET: //碰到子弹\n                break;\n            case this.PLAYER: //碰到player\n                break;\n        }\n\n        //碰撞自我加收\n        SnailTail.put(this);\n\n        //播放死亡特效\n        //.........\n    }\n}\n\n"]}