{"version":3,"sources":["file:///Volumes/%E5%9B%BA%E6%80%81/project/extensions/oops-plugin-framework/assets/libs/behavior-tree/Sequence.ts"],"names":["Sequence","BranchNode","constructor","nodes","success","_actualTask","children","length","_run","_blackboard","_control","fail","blackboard","_nodeRunning","run"],"mappings":";;;0CAaaA,Q;;;;;;;;;;;;;;;;;;AAPJC,MAAAA,U,iBAAAA,U;;;;;;AANT;AACA;AACA;AACA;AACA;AACA;;;AAIA;AACA;AACA;AACA;0BACaD,Q,GAAN,MAAMA,QAAN;AAAA;AAAA,oCAAkC;AACrCE,QAAAA,WAAW,CAACC,KAAD,EAA0B;AACjC,gBAAMA,KAAN;AACH;;AAEMC,QAAAA,OAAO,GAAG;AACb,gBAAMA,OAAN;AAEA,eAAKC,WAAL,IAAoB,CAApB;;AACA,cAAI,KAAKA,WAAL,GAAmB,KAAKC,QAAL,CAAcC,MAArC,EAA6C;AACzC,iBAAKC,IAAL,CAAU,KAAKC,WAAf;AACH,WAFD,MAGK;AACD,iBAAKC,QAAL,CAAcN,OAAd;AACH;AACJ;;AAEMO,QAAAA,IAAI,GAAG;AACV,gBAAMA,IAAN;;AACA,eAAKD,QAAL,CAAcC,IAAd;AACH;;AAESH,QAAAA,IAAI,CAACI,UAAD,EAAmB;AAC7B,cAAI,KAAKC,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBC,GAAlB,CAAsB,KAAKL,WAA3B;AACH,WAFD,MAGK;AACD,kBAAMD,IAAN;AACH;AACJ;;AA7BoC,O","sourcesContent":["/*\r\n * @Author: dgflash\r\n * @Date: 2022-06-21 12:05:14\r\n * @LastEditors: dgflash\r\n * @LastEditTime: 2022-07-20 14:05:22\r\n */\r\nimport { BranchNode } from './BranchNode';\r\nimport { BTreeNode } from './BTreeNode';\r\n\r\n/** \r\n * 逻辑与关系\r\n * 只要有一个子节点返回false，则停止执行其它子节点，并且Sequence返回false。如果所有子节点都返回true，则Sequence返回true。\r\n */\r\nexport class Sequence extends BranchNode {\r\n    constructor(nodes: Array<BTreeNode>) {\r\n        super(nodes);\r\n    }\r\n\r\n    public success() {\r\n        super.success();\r\n\r\n        this._actualTask += 1;\r\n        if (this._actualTask < this.children.length) {\r\n            this._run(this._blackboard);\r\n        }\r\n        else {\r\n            this._control.success();\r\n        }\r\n    }\r\n\r\n    public fail() {\r\n        super.fail();\r\n        this._control.fail();\r\n    }\r\n\r\n    protected _run(blackboard?: any) {\r\n        if (this._nodeRunning) {\r\n            this._nodeRunning.run(this._blackboard);\r\n        }\r\n        else {\r\n            super._run();\r\n        }\r\n    }\r\n}\r\n"]}