{"version":3,"sources":["file:///Volumes/SSD/ccProject/extensions/oops-plugin-framework/assets/libs/model-view/ui/BhvFrameIndex.ts"],"names":["CCInteger","Component","error","Sprite","SpriteFrame","_decorator","ccclass","property","executeInEditMode","requireComponent","menu","BhvFrameIndex","type","tooltip","index","_index","value","spriteFrames","length","sprite","node","getComponent","spriteFrame","setName","name","findIndex","v","random","min","max","frameMax","Math","floor","next","previous"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,U,OAAAA,U;;;;;;;;;OAErD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA,iBAArB;AAAwCC,QAAAA,gBAAxC;AAA0DC,QAAAA;AAA1D,O,GAAmEL,U;;+BAM5DM,a,WAFZF,gBAAgB,CAACN,MAAD,C,UAChBO,IAAI,CAAC,6BAAD,C,UAEAH,QAAQ,CAAC;AACNK,QAAAA,IAAI,EAAE,CAACR,WAAD,CADA;AAENS,QAAAA,OAAO,EAAE;AAFH,OAAD,C,UAMRN,QAAQ,CAAC;AACNK,QAAAA,IAAI,EAAEZ,SADA;AAENa,QAAAA,OAAO,EAAE;AAFH,OAAD,C,EAXZP,O,UACAE,iB,kDADD,MAIaG,aAJb,SAImCV,SAJnC,CAI6C;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAWhC,YAALa,KAAK,GAAG;AACR,iBAAO,KAAKC,MAAZ;AACH;;AACQ,YAALD,KAAK,CAACE,KAAD,EAAgB;AACrB,cAAIA,KAAK,GAAG,CAAZ,EAAe;AACf,eAAKD,MAAL,GAAcC,KAAK,GAAG,KAAKC,YAAL,CAAkBC,MAAxC;AACA,cAAIC,MAAM,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBlB,MAAvB,CAAb,CAHqB,CAIrB;;AACAgB,UAAAA,MAAM,CAACG,WAAP,GAAqB,KAAKL,YAAL,CAAkB,KAAKF,MAAvB,CAArB;AACH;;AAKD;AACAQ,QAAAA,OAAO,CAACC,IAAD,EAAe;AAClB,cAAIV,KAAK,GAAG,KAAKG,YAAL,CAAkBQ,SAAlB,CAA4BC,CAAC,IAAI;AAAE,mBAAOA,CAAC,CAAEF,IAAH,IAAWA,IAAlB;AAAwB,WAA3D,CAAZ;;AACA,cAAIV,KAAK,GAAG,CAAZ,EAAe;AAAEZ,YAAAA,KAAK,CAAC,yBAAD,EAA4BsB,IAA5B,CAAL;AAAwC;;AACzD,eAAKV,KAAL,GAAaA,KAAK,IAAI,CAAtB;AACH;AAED;;;AACAa,QAAAA,MAAM,CAACC,GAAD,EAAeC,GAAf,EAA6B;AAC/B,cAAI,CAAC,KAAKZ,YAAV,EAAwB;AACxB,cAAIa,QAAQ,GAAG,KAAKb,YAAL,CAAkBC,MAAjC;AACA,cAAIU,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAG,CAAzB,EAA4BA,GAAG,GAAG,CAAN;AAC5B,cAAIC,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAGC,QAAzB,EAAmCD,GAAG,GAAGC,QAAN;AAEnC,eAAKhB,KAAL,GAAaiB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACJ,MAAL,MAAiBE,GAAG,GAAGD,GAAvB,IAA8BA,GAAzC,CAAb;AACH;;AAEDK,QAAAA,IAAI,GAAG;AACH,eAAKnB,KAAL;AACH;;AAEDoB,QAAAA,QAAQ,GAAG;AACP,eAAKpB,KAAL;AACH;;AAhDwC,O;;;;;iBAKC,CAAC,IAAD,C;;iOAiBzCP,Q;;;;;iBACwB,C","sourcesContent":["import { CCInteger, Component, error, Sprite, SpriteFrame, _decorator } from \"cc\";\r\n\r\nconst { ccclass, property, executeInEditMode, requireComponent, menu } = _decorator;\r\n\r\n@ccclass\r\n@executeInEditMode\r\n@requireComponent(Sprite)\r\n@menu(\"添加特殊行为/UI/Frame Index(帧图改变)\")\r\nexport class BhvFrameIndex extends Component {\r\n    @property({\r\n        type: [SpriteFrame],\r\n        tooltip: 'sprite将会用到帧图片'\r\n    })\r\n    spriteFrames: Array<SpriteFrame | null> = [null];\r\n\r\n    @property({\r\n        type: CCInteger,\r\n        tooltip: '当前显示的帧图'\r\n    })\r\n    get index() {\r\n        return this._index;\r\n    }\r\n    set index(value: number) {\r\n        if (value < 0) return;\r\n        this._index = value % this.spriteFrames.length;\r\n        let sprite = this.node.getComponent(Sprite)!;\r\n        //设置 Sprite 组件的spriteFrame属性，变换图片               \r\n        sprite.spriteFrame = this.spriteFrames[this._index];\r\n    }\r\n\r\n    @property\r\n    private _index: number = 0;\r\n\r\n    /** 通过设置帧名字来设置对象 */\r\n    setName(name: string) {\r\n        let index = this.spriteFrames.findIndex(v => { return v!.name == name });\r\n        if (index < 0) { error('frameIndex 设置了不存在的name:', name) }\r\n        this.index = index || 0;\r\n    }\r\n\r\n    /** 随机范围设置帧图片 */\r\n    random(min?: number, max?: number) {\r\n        if (!this.spriteFrames) return;\r\n        let frameMax = this.spriteFrames.length;\r\n        if (min == null || min < 0) min = 0;\r\n        if (max == null || max > frameMax) max = frameMax;\r\n\r\n        this.index = Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    next() {\r\n        this.index++;\r\n    }\r\n\r\n    previous() {\r\n        this.index--;\r\n    }\r\n}\r\n"]}